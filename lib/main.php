<?php/** * @author webrek * @copyright 2013 */include "lib/config.php";class contenido{    var $op;    var $html = '';    var $var = array();    function __construct()    {        $this->op = $_REQUEST['op'];        switch ($this->op) {            default:            $this->html .= $this->loadFromHtml('home.html');                break;            case 'contacto':                $this->html .= $this->loadFromHtml('contacto.html');                break;            case '404':                $this->html .= $this->loadFromHtml('404.html');                break;            case 'servicios':                $this->html .= $this->loadFromHtml('servicios.html');                break;            case 'avca':                $this->html .= $this->loadFromHtml('avca.html');                break;            case 'portafolio':                $this->html = $this->loadFromHtml('portafolio.html');                break;            case 'articulos':                $this->html = $this->readgooglenews();                break;        }        return $this->html;    }    function cargarVars(){    }    function readgooglenews(){        $url = "https://www.google.com.mx/search?num=10&hl=es&gl=mx&tbm=nws&q=reforma+fiscal";        $news = simplexml_load_file('https://news.google.com/news/feeds?output=rss&hl=es&ned=es_mx&q=reforma%20fiscal');        $feeds = array();        $i = 0;        foreach ($news->channel->item as $item)        {            preg_match('@src="([^"]+)"@', $item->description, $match);            $parts = explode('<font size="-1">', $item->description);            $feeds[$i]['title'] = (string) $item->title;            $feeds[$i]['link'] = (string) $item->link;            $feeds[$i]['image'] = $match[1];            $feeds[$i]['site_title'] = strip_tags($parts[1]);            $feeds[$i]['story'] = strip_tags($parts[2]);            $i++;        }        $html .= '<div id="breadcrumb"><!-- breadcrumb starts-->				<div class="container">					<div class="one-half">						<h4>Blog Layout 2</h4>					</div>					<div class="one-half last">						<nav id="breadcrumbs"><!--breadcrumb nav starts-->						<ul>							<li>You are here:</li>							<li><a href="index.html">Home</a></li>							<li>Blog</li>						</ul>						</nav><!--breadcrumb nav ends -->					</div>				</div>			</div><!--breadcrumbs ends -->			<div class="container">				<div class="one">					<div class="three-fourth">						<div class="blog-post layout-2">							<div class="media-holder">								<a href="images/blog/blog-small-01.jpg" class="portfolio-item-link" data-rel="prettyPhoto" title="Some Image Dummy Title">								<span class="portfolio-item-hover"></span><img src="images/blog/blog-small-01.jpg" alt=" "/>								</a>							</div>							<div class="permalink">								<h4><a href="blog-post.html">Responsive HTML5 Template Free For Download </a></h4>							</div>							<ul class="post-meta">								<li><i class="icon-time"></i> 2 July, 2013 </li>								<!-- Date -->								<li><i class="icon-user"></i><a href="#">Admin</a></li>								<!-- Author -->								<li><i class="icon-tags"></i><a href="#">Web Development</a></li>								<!-- Category -->								<li><i class="icon-comments"></i><a href="#">32 Comments</a></li>								<!-- Comments -->							</ul>							<!-- End post-meta -->							<div class="post-intro">								<p>									Morbi placerat bibendum eget dolor pellentesque sed consectetur pulvinar pellentesque bibendum. Vestibulum varius hendrerit turpis quiseam cursus. Donec bibendum vestibulum gravida.								</p>								<br/>								<p>									<a href="blog-post.html" class="button color small round">Read More</a>								</p>							</div>						</div>						<div class="blog-post layout-2">							<div class="media-holder">								<a href="images/blog/blog-small-02.jpg" class="portfolio-item-link" data-rel="prettyPhoto" title="Some Image Dummy Title">								<span class="portfolio-item-hover"></span><img src="images/blog/blog-small-02.jpg" alt=" "/>								</a>							</div>							<div class="permalink">								<h4><a href="blog-post.html">Best Way to Build Responsive Web Sites</a></h4>							</div>							<ul class="post-meta">								<li><i class="icon-time"></i> 2 July, 2013 </li>								<!-- Date -->								<li><i class="icon-user"></i><a href="#">Admin</a></li>								<!-- Author -->								<li><i class="icon-tags"></i><a href="#">Web Development</a></li>								<!-- Category -->								<li><i class="icon-comments"></i><a href="#">32 Comments</a></li>								<!-- Comments -->							</ul>							<!-- End post-meta -->							<div class="post-intro">								<p>									Morbi placerat bibendum eget dolor pellentesque sed consectetur pulvinar pellentesque bibendum. Vestibulum varius hendrerit turpis quiseam cursus. Donec bibendum vestibulum gravida.								</p>								<br/>								<p>									<a href="blog-post.html" class="button color small round">Read More</a>								</p>							</div>						</div>						<div class="blog-post layout-2">							<div class="media-holder">								<a href="images/blog/blog-small-03.jpg" class="portfolio-item-link" data-rel="prettyPhoto" title="Some Image Dummy Title">								<span class="portfolio-item-hover"></span><img src="images/blog/blog-small-03.jpg" alt=" "/>								</a>							</div>							<div class="permalink">								<h4><a href="blog-post.html">Creating Fully Layered PSD Mockup</a></h4>							</div>							<ul class="post-meta">								<li><i class="icon-time"></i> 2 July, 2013 </li>								<!-- Date -->								<li><i class="icon-user"></i><a href="#">Admin</a></li>								<!-- Author -->								<li><i class="icon-tags"></i><a href="#">Web Development</a></li>								<!-- Category -->								<li><i class="icon-comments"></i><a href="#">32 Comments</a></li>								<!-- Comments -->							</ul>							<!-- End post-meta -->							<div class="post-intro">								<p>									Morbi placerat bibendum eget dolor pellentesque sed consectetur pulvinar pellentesque bibendum. Vestibulum varius hendrerit turpis quiseam cursus. Donec bibendum vestibulum gravida.								</p>								<br/>								<p>									<a href="blog-post.html" class="button color small round">Read More</a>								</p>							</div>						</div>						<div class="blog-post layout-2">							<div class="media-holder">								<a href="images/blog/blog-small-04.jpg" class="portfolio-item-link" data-rel="prettyPhoto" title="Some Image Dummy Title">								<span class="portfolio-item-hover"></span><img src="images/blog/blog-small-04.jpg" alt=" "/>								</a>							</div>							<div class="permalink">								<h4><a href="blog-post.html">10+ Free Fonts For Download</a></h4>							</div>							<ul class="post-meta">								<li><i class="icon-time"></i> 2 July, 2013 </li>								<!-- Date -->								<li><i class="icon-user"></i><a href="#">Admin</a></li>								<!-- Author -->								<li><i class="icon-tags"></i><a href="#">Web Development</a></li>								<!-- Category -->								<li><i class="icon-comments"></i><a href="#">32 Comments</a></li>								<!-- Comments -->							</ul>							<!-- End post-meta -->							<div class="post-intro">								<p>									Morbi placerat bibendum eget dolor pellentesque sed consectetur pulvinar pellentesque bibendum. Vestibulum varius hendrerit turpis quiseam cursus. Donec bibendum vestibulum gravida.								</p>								<br/>								<p>									<a href="blog-post.html" class="button color small round">Read More</a>								</p>							</div>						</div>						<!-- Pagination -->						<nav class="pagination">						<ul>							<li><a href="#">Previous</a></li>							<li><a href="#">1</a></li>							<li><a href="#" class="current">2</a></li>							<li><a href="#">3</a></li>							<li><a href="#">Next</a></li>						</ul>						<div class="clearfix">						</div>						</nav>						<!-- End pagination -->					</div>					<div class="one-fourth last sidebar">						<div class="widget">							<h4 class="widget-title">About Our Writing</h4>							<p>								Lorem ipsum dolor sit amet nec, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes. Lorem ipsum dolor sit amet nec, consectetuer adipiscing elit. Aenean commodo ligula eget dolor							</p>						</div>						<div class="widget">							<h4 class="widget-title">Archive</h4>							<ul class="sidebar-nav">								<li><a href="#" title="Some Title">July 2013</a></li>								<li><a href="#" title="Some Title">June 2013</a></li>								<li><a href="#" title="Some Title">May 2013</a></li>								<li><a href="#" title="Some Title">April 2013</a></li>								<li><a href="#" title="Some Title">March 2013</a></li>								<li><a href="#" title="Some Title">February 2013</a></li>								<li><a href="#" title="Some Title">January 2013</a></li>								<li><a href="#" title="Some Title">December 2012</a></li>								<li><a href="#" title="Some Title">November 2012</a></li>							</ul>						</div>						<div class="widget">							<h4 class="widget-title">Popular Tags</h4>							<ul class="popular-tags">								<li><a href="#">AJAX</a></li>								<li><a href="#">HTML5</a></li>								<li><a href="#">jQuery</a></li>								<li><a href="#">CSS3</a></li>								<li><a href="#">PHP</a></li>								<li><a href="#">Wordpress</a></li>								<li><a href="#">Photoshop</a></li>								<li><a href="#">Uncategorized</a></li>								<li><a href="#">Ruby</a></li>								<li><a href="#">Drupal</a></li>								<li><a href="#">Inspiration</a></li>								<li><a href="#">Joomla</a></li>								<li><a href="#">Design</a></li>								<li><a href="#">Responsive</a></li>								<li><a href="#">Envato</a></li>								<li><a href="#">Wallpapers</a></li>								<li><a href="#">Fonts</a></li>							</ul>						</div>						<div class="widget">							<h4 class="widget-title">Flicrk Photos</h4>							<div class="flickr-widget inner">							</div>						</div>					</div>				</div>			</div>';        return $html;    }    function loadFromDb($nombre){        $sql = "SELECT * FROM contenido WHERE nombre = '$nombre'";        $query = mysql_query($sql) or die (mysql_error());        $array = mysql_fetch_array($query);        return $array['html'];    }    function loadFromHtml($file){        global $config;        if(file_exists("templates/".$file)){            $html = file_get_contents("templates/".$file);            foreach($this->var AS $va => $res){                $html = preg_replace('/\{([a-z]+)\}/i', $res, $html);            }            return $html;        }    }    function dolarDOF(){        $dia = date('d');        $mes = date('m');        $anio = date('Y');        //$url =  "http://www.dof.gob.mx/indicadores_detalle.php?cod_tipo_indicador=158&dfecha=".$dia."%2F".$mes."%2F".$anio."&hfecha=".$dia."%2F".$mes."%2F".$anio;        $url = "http://www.dof.gob.mx/indicadores_detalle.php?cod_tipo_indicador=158&dfecha=06%2F03%2F2014&hfecha=06%2F03%2F2014";        $data = file_get_contents($url);        preg_match("'<td width=\"52%\" align=\"center\" class=\"txt\">(.*?)</td>'si", $data, $result);        $tipoDeCambio = $result[1];        if(empty($tipoDeCambio)){            $tipoCambio = 'NA';        }else{            $tipoCambio = $tipoDeCambio;        }        return $tipoCambio;    }}?>